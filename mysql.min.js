const DB={};function isFunction(variableToCek){return variableToCek instanceof Function}DB.connection={},DB.server=null,DB.query=async(query,func,act="data")=>{var params=new URLSearchParams;params.append("host",DB.connection.host),params.append("username",DB.connection.user),params.append("password",DB.connection.password),params.append("database",DB.connection.database),params.append("key",DB.connection.key),params.append("action",act),params.append("query",query);try{let res=await axios.post(DB.server,params);if(Array.isArray(res.data)){let data=res.data;func(res.data)}else if("save"==res.data)func(res.data);else{let html='\n                    <div id="error-db-connection">\n                        <style>\n\n                            .body-error-message{\n                                position: fixed;\n                                display: block;\n                                bottom: calc(100vh - 50px);\n                                padding: 10px;\n                                right: 10px;\n                                background: #333333;\n                                color: white;\n                                z-index: 10000;\n                                animation: error 4s ease-in-out;\n                            }\n\n                            @keyframes error{\n                                0%{\n                                    bottom: 10px;\n                                    opacity: 0;\n                                }\n                                50%{\n                                    bottom: calc(100vh - 50px);\n                                    opacity: 1;\n                                }\n                                90%{\n                                    bottom: calc(100vh - 50px);\n                                    opacity: 0;\n                                }\n                            }\n\n                        </style>\n                        <span class="body-error-message">check your database connection</span>\n                    </div>\n                ';document.body.innerHTML+=html,console.log(query),console.log(),setTimeout(()=>{document.getElementById("error-db-connection").remove(),DB.query(query,func,act)},3600)}}catch(error){if("Error: Network Error"==error){let html='\n                <div id="error-db-connection">\n                    <style>\n\n                        .body-error-message{\n                            position: fixed;\n                            display: block;\n                            bottom: calc(100vh - 50px);\n                            padding: 10px;\n                            right: 10px;\n                            background: #333333;\n                            color: white;\n                            z-index: 10000;\n                            animation: error 4s ease-in-out;\n                        }\n\n                        @keyframes error{\n                            0%{\n                                bottom: 10px;\n                                opacity: 0;\n                            }\n                            50%{\n                                bottom: calc(100vh - 50px);\n                                opacity: 1;\n                            }\n                            90%{\n                                bottom: calc(100vh - 50px);\n                                opacity: 0;\n                            }\n                        }\n                    </style>\n                    <span class="body-error-message">your connection lost</span>\n                </div>\n            ';document.body.innerHTML+=html,console.log(),setTimeout(()=>{document.getElementById("error-db-connection").remove(),DB.query(query,func,act)},3600)}}},DB.server="http://localhost/server/index.php",DB.connection={host:"localhost",user:"root",password:"",database:"electron",key:"halohalobandung"},DB.read=function(table,opsi,condition,limit,order,func=null){let cond="",where="";if(isFunction(condition)&&(func=condition),Array.isArray(opsi)&&(opsi=opsi.join(", ")),"object"==typeof condition){func=null;let myor=Object.keys(condition).map((function(item){if("object"==typeof condition[item]&&-1!=item.indexOf("OR"))return"( "+Object.keys(condition[item]).map((function(itemx){if(-1!=condition[item][itemx].indexOf("%")){if(itemx.indexOf("_")){let splitback=itemx.split("_"),split=itemx.split("_");return split.length>1&&split.pop(),console.log(splitback),split.join("_")+' LIKE "'+condition[item][itemx]+'"'}return itemx+' LIKE "'+condition[item][itemx]+'"'}if(itemx.indexOf("_")){let split=itemx.split("_");return split.length>1&&split.pop(),split.join("_")+' = "'+condition[item][itemx]+'"'}return itemx+' = "'+condition[item][itemx]+'"'})).join(" OR ")+" )";if(-1!=condition[item].indexOf("%")){if(item.indexOf("_")){let split=item.split("_");return split.length>1&&split.pop(),split.join("_")+' LIKE "'+condition[item]+'"'}return item+' LIKE "'+condition[item]+'"'}if(item.indexOf("_")){let split=item.split("_");return split.length>1&&split.pop(),split.join("_")+' = "'+condition[item]+'"'}return item+' = "'+condition[item]+'"'})).join(" AND ");console.log(myor),cond=myor}isFunction(limit)&&(func=limit),isFunction(order)&&(func=order),""!=cond&&(where="WHERE"),DB.query(`SELECT ${opsi} FROM `+table+" "+where+" "+cond,func)},DB.create=function(table,condition,func){if("object"==typeof condition){let keys=Object.keys(condition),val=keys.map(item=>'"'+condition[item]+'"').join(", ");DB.query(`INSERT INTO ${table} (${keys.join(", ")}) VALUES (${val}) `,func,"save")}else console.log("sorry data is not object")},DB.delete=function(table,condition,func){if("object"==typeof condition){let val=Object.keys(condition).map(item=>" "+item+' = "'+condition[item]+'"').join(" AND ");DB.query(`DELETE FROM ${table} WHERE ${val}`,func,"save")}else console.log("sorry data is not object")},DB.update=function(table,dataupdate,condition,func){if("object"==typeof dataupdate)if("object"==typeof condition){let data=Object.keys(dataupdate).map(item=>" "+item+' = "'+dataupdate[item]+'"').join(", "),val=Object.keys(condition).map(item=>" "+item+' = "'+condition[item]+'"').join(" AND ");DB.query(`UPDATE ${table} SET ${data} WHERE ${val}`,func,"save")}else console.log("sorry data is not object");else console.log("sorry data is not object")};